(this["webpackJsonpreact-os-template"]=this["webpackJsonpreact-os-template"]||[]).push([[0],{22:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var i=n(1),c=n.n(i),s=n(3),l=n.n(s),a=(n(22),n(2)),o=n(17),d=n(8),j=n.n(d),r=n(9),b=(n(41),n(0));const O=e=>{let{id:t,title:n,children:c,isMinimized:s,isFullscreen:l,onClose:a,onMinimize:d,onToggleFullscreen:j}=e;const r={width:500,height:400},O={width:"100%",height:"100%"},[h,u]=Object(i.useState)(r),[m,p]=Object(i.useState)({x:100,y:50});return Object(b.jsx)(o.a,{size:h,position:m,bounds:"parent",onDragStop:(e,t)=>p({x:t.x,y:t.y}),onResizeStop:(e,t,n,i,c)=>{u({width:n.style.width,height:n.style.height}),p(c)},enableResizing:!l&&!s,disableDragging:l||s,dragHandleClassName:"window-header",className:"window ".concat(l?"fullscreen":""),children:Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{className:"window-header",children:[Object(b.jsx)("span",{children:n}),Object(b.jsxs)("div",{className:"window-controls",children:[Object(b.jsx)("button",{onClick:()=>d(t),children:s?"\ud83d\udd3c":"\ud83d\udd3d"}),Object(b.jsx)("button",{onClick:()=>{l?(u(r),p({x:100,y:50})):(u(O),p({x:0,y:0})),j(t)},children:l?"\ud83d\uddd7":"\ud83d\uddd6"}),Object(b.jsx)("button",{onClick:()=>a(t),children:"X"})]})]}),!s&&Object(b.jsx)("div",{className:"window-content",children:c})]})})},h=e=>{let{windows:t,onOpenWindow:n}=e;return Object(b.jsx)("div",{className:"taskbar",children:Object(b.jsx)("div",{className:"taskbar-center",children:t.filter(e=>e.isOpen).map(e=>Object(b.jsx)("button",{onClick:()=>n(e.id),children:e.title},e.id))})})},u=e=>{let{title:t,windowId:n,onOpen:i}=e;return Object(b.jsxs)("div",{className:"desktop-icon",onDoubleClick:()=>i(n),children:[Object(b.jsx)("div",{className:"icon-image",children:"\ud83d\uddc2\ufe0f"}),Object(b.jsx)("div",{className:"icon-title",children:t})]})},m=e=>{var t;let{node:n,updateNode:c,path:s=[]}=e;const[l,o]=Object(i.useState)(!0),[d,O]=Object(i.useState)(!1),[h,u]=Object(i.useState)(n.name),[p,x]=Object(i.useState)(!1),[w,g]=Object(i.useState)(n.content||"");return"file"===n.type?Object(b.jsxs)("div",{className:"file",children:["\ud83d\udcc4"," ",d?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("input",{value:h,onChange:e=>u(e.target.value)}),Object(b.jsx)("button",{onClick:()=>{c(s,e=>Object(a.a)(Object(a.a)({},e),{},{name:h})),O(!1)},children:"Save"})]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{onDoubleClick:()=>x(!0),children:n.name}),Object(b.jsx)("button",{onClick:()=>O(!0),children:"\u270f"}),Object(b.jsx)("button",{onClick:()=>{const e=new Blob([n.content||""],{type:"text/plain"});Object(r.saveAs)(e,n.name)},children:"\u2b07"}),Object(b.jsx)("button",{onClick:()=>c(s,()=>null),children:"\ud83d\uddd1"})]}),p&&Object(b.jsxs)("div",{children:[Object(b.jsx)("textarea",{value:w,onChange:e=>g(e.target.value)}),Object(b.jsx)("button",{onClick:()=>{c(s,e=>Object(a.a)(Object(a.a)({},e),{},{content:w})),x(!1)},children:"Save"})]})]}):Object(b.jsxs)("div",{className:"folder",children:[Object(b.jsxs)("div",{className:"folder-title",children:["\ud83d\udcc1 ",n.name,Object(b.jsx)("button",{onClick:()=>o(!l),children:l?"\u25bc":"\u25b6"}),Object(b.jsx)("button",{onClick:()=>c(s,e=>Object(a.a)(Object(a.a)({},e),{},{children:[...e.children,{type:"file",name:"newFile.txt",content:""}]})),children:"\ud83d\udcc4+"}),Object(b.jsx)("button",{onClick:()=>c(s,e=>Object(a.a)(Object(a.a)({},e),{},{children:[...e.children,{type:"folder",name:"New Folder",children:[]}]})),children:"\ud83d\udcc1+"}),Object(b.jsx)("button",{onClick:async()=>{const e=new j.a,t=(e,n)=>{e.children.forEach(e=>{if("file"===e.type)n.file(e.name,e.content||"");else{const i=n.folder(e.name);t(e,i)}})};t(n,e);const i=await e.generateAsync({type:"blob"});Object(r.saveAs)(i,n.name+".zip")},children:"\ud83d\udddc"}),Object(b.jsx)("input",{type:"file",onChange:e=>{const t=e.target.files[0];if(t)if(t.name.endsWith(".zip"))j.a.loadAsync(t).then(e=>{e.forEach(async(e,t)=>{if(!t.dir){const n=await t.async("string");c(s,t=>Object(a.a)(Object(a.a)({},t),{},{children:[...t.children,{type:"file",name:e,content:n}]}))}})});else{const e=new FileReader;e.onload=()=>{c(s,n=>Object(a.a)(Object(a.a)({},n),{},{children:[...n.children,{type:"file",name:t.name,content:e.result}]}))},e.readAsText(t)}}})]}),l&&Object(b.jsx)("div",{className:"folder-contents",children:null===(t=n.children)||void 0===t?void 0:t.map((e,t)=>Object(b.jsx)(m,{node:e,updateNode:c,path:[...s,"children",t]},t))})]})};var p=()=>{const[e,t]=Object(i.useState)([{id:1,title:"My Computer",content:{type:"folder",name:"Root",children:[]},isOpen:!0,isMinimized:!1,isFullscreen:!1},{id:2,title:"Notes",content:"This is a simple notes window.",isOpen:!1,isMinimized:!1,isFullscreen:!1}]),n=(e,n)=>{const i=function(t){let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(c.length===e.length)return n(t);const s=e[c.length];return Object(a.a)(Object(a.a)({},t),{},{[s]:i(t[s],[...c,s])})};t(e=>e.map(e=>"string"===typeof e.content?e:Object(a.a)(Object(a.a)({},e),{},{content:i(e.content)})))},c=e=>t(t=>t.map(t=>t.id===e?Object(a.a)(Object(a.a)({},t),{},{isOpen:!0,isMinimized:!1}):t)),s=e=>t(t=>t.map(t=>t.id===e?Object(a.a)(Object(a.a)({},t),{},{isOpen:!1}):t)),l=e=>t(t=>t.map(t=>t.id===e?Object(a.a)(Object(a.a)({},t),{},{isMinimized:!t.isMinimized}):t)),o=e=>t(t=>t.map(t=>t.id===e?Object(a.a)(Object(a.a)({},t),{},{isFullscreen:!t.isFullscreen}):t));return Object(b.jsxs)("div",{className:"desktop",children:[e.map(e=>Object(b.jsx)(u,{title:e.title,windowId:e.id,onOpen:c},e.id)),e.filter(e=>e.isOpen).map(e=>Object(b.jsx)(O,{id:e.id,title:e.title,isMinimized:e.isMinimized,isFullscreen:e.isFullscreen,onClose:s,onMinimize:l,onToggleFullscreen:o,children:"string"===typeof e.content?e.content:Object(b.jsx)(m,{node:e.content,updateNode:n})},e.id)),Object(b.jsx)(h,{windows:e,onOpenWindow:c})]})};l.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(p,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.85470122.chunk.js.map