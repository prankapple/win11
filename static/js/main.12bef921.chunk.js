(this["webpackJsonpreact-os-template"]=this["webpackJsonpreact-os-template"]||[]).push([[0],{22:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var i=n(1),c=n.n(i),s=n(3),l=n.n(s),a=(n(22),n(2)),o=n(17),r=n(8),d=n.n(r),j=n(9),b=(n(41),n(0));const h=e=>{let{id:t,title:n,children:c,isMinimized:s,isFullscreen:l,onClose:a,onMinimize:r,onToggleFullscreen:d}=e;const j={width:500,height:400},h={width:"100%",height:"100%"},[u,O]=Object(i.useState)(j),[m,p]=Object(i.useState)({x:100,y:50});return Object(b.jsx)(o.a,{size:u,position:m,bounds:"parent",onDragStop:(e,t)=>p({x:t.x,y:t.y}),onResizeStop:(e,t,n,i,c)=>{O({width:n.style.width,height:n.style.height}),p(c)},enableResizing:!l&&!s,disableDragging:l||s,dragHandleClassName:"window-header",className:"window ".concat(l?"fullscreen":""),children:Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{className:"window-header",children:[Object(b.jsx)("span",{children:n}),Object(b.jsxs)("div",{children:[Object(b.jsx)("button",{onClick:()=>r(t),children:s?"\ud83d\udd3c":"\ud83d\udd3d"}),Object(b.jsx)("button",{onClick:()=>{l?(O(j),p({x:100,y:50})):(O(h),p({x:0,y:0})),d(t)},children:l?"\ud83d\uddd7":"\ud83d\uddd6"}),Object(b.jsx)("button",{onClick:()=>a(t),children:"X"})]})]}),!s&&Object(b.jsx)("div",{className:"window-content",children:c})]})})},u=e=>{var t;let{node:n,updateNode:c}=e;const[s,l]=Object(i.useState)(!0),[a,o]=Object(i.useState)(!1),[r,h]=Object(i.useState)(n.name),[O,m]=Object(i.useState)(!1),[p,x]=Object(i.useState)(n.content||""),f=()=>{const e=new Blob([n.content||""],{type:"text/plain"});Object(j.saveAs)(e,n.name)},g=()=>c("delete",n),y=()=>{c("rename",n,r),o(!1)},v=()=>{c("editContent",n,p),m(!1)};return"file"===n.type?Object(b.jsxs)("div",{className:"file",children:["\ud83d\udcc4"," ",a?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("input",{value:r,onChange:e=>h(e.target.value)}),Object(b.jsx)("button",{onClick:y,children:"Save"})]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{onDoubleClick:()=>m(!0),children:n.name}),Object(b.jsx)("button",{onClick:()=>o(!0),children:"\u270f"}),Object(b.jsx)("button",{onClick:f,children:"\u2b07"}),Object(b.jsx)("button",{onClick:g,children:"\ud83d\uddd1"})]}),O&&Object(b.jsxs)("div",{children:[Object(b.jsx)("textarea",{value:p,onChange:e=>x(e.target.value)}),Object(b.jsx)("button",{onClick:v,children:"Save"})]})]}):Object(b.jsxs)("div",{className:"folder",children:[Object(b.jsxs)("div",{children:["\ud83d\udcc1 ",n.name,Object(b.jsx)("button",{onClick:()=>l(!s),children:s?"\u25bc":"\u25b6"}),Object(b.jsx)("button",{onClick:()=>c("createFile",n,{type:"file",name:"newFile.txt",content:""}),children:"\ud83d\udcc4+"}),Object(b.jsx)("button",{onClick:()=>c("createFolder",n,{type:"folder",name:"New Folder",children:[]}),children:"\ud83d\udcc1+"}),Object(b.jsx)("button",{onClick:async()=>{const e=new d.a,t=function(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";n.children.forEach(n=>{"file"===n.type?e.file(i+n.name,n.content||""):t(n,i+n.name+"/")})};t(n);const i=await e.generateAsync({type:"blob"});Object(j.saveAs)(i,n.name+".zip")},children:"\ud83d\udddc"}),Object(b.jsx)("button",{onClick:g,children:"\ud83d\uddd1"}),Object(b.jsx)("input",{type:"file",onChange:e=>{const t=e.target.files[0];if(t)if(t.name.endsWith(".zip"))d.a.loadAsync(t).then(e=>{e.forEach(async(e,t)=>{if(!t.dir){const i=await t.async("string");c("createFile",n,{type:"file",name:e,content:i})}})});else{const e=new FileReader;e.onload=()=>{c("createFile",n,{type:"file",name:t.name,content:e.result})},e.readAsText(t)}}})]}),s&&Object(b.jsx)("div",{style:{paddingLeft:20},children:null===(t=n.children)||void 0===t?void 0:t.map((e,t)=>Object(b.jsx)(u,{node:e,updateNode:c},t))})]})};var O=()=>{const[e,t]=Object(i.useState)([{id:1,title:"My Computer",content:{type:"folder",name:"Root",children:[]},isOpen:!0,isMinimized:!1,isFullscreen:!1}]),n=(e,n,i)=>{const c=t=>{if(t===n)switch(e){case"delete":return null;case"rename":return t.name=i,t;case"editContent":return t.content=i,t;case"createFile":case"createFolder":return t.children.push(i),t;default:return t}return t.children&&(t.children=t.children.map(c).filter(Boolean)),t};t(e=>e.map(e=>Object(a.a)(Object(a.a)({},e),{},{content:c(Object(a.a)({},e.content))})))},c=e=>t(t=>t.map(t=>t.id===e?Object(a.a)(Object(a.a)({},t),{},{isOpen:!1}):t)),s=e=>t(t=>t.map(t=>t.id===e?Object(a.a)(Object(a.a)({},t),{},{isMinimized:!t.isMinimized}):t)),l=e=>t(t=>t.map(t=>t.id===e?Object(a.a)(Object(a.a)({},t),{},{isFullscreen:!t.isFullscreen}):t));return Object(b.jsx)("div",{className:"desktop",children:e.filter(e=>e.isOpen).map(e=>Object(b.jsx)(h,{id:e.id,title:e.title,isMinimized:e.isMinimized,isFullscreen:e.isFullscreen,onClose:c,onMinimize:s,onToggleFullscreen:l,children:Object(b.jsx)(u,{node:e.content,updateNode:n})},e.id))})};l.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(O,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.12bef921.chunk.js.map